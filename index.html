<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>OS Hacker Web</title>
  <link rel="icon" type="image/png" href="https://i.imgur.com/o0xdmoR.png">
  <style>
    body { background: #000; color: #00ff00; font-family: monospace; margin: 0; padding: 0; overflow: hidden; }
    #terminal { width: 90%; max-width: 900px; margin: 50px auto; padding: 20px;
                 border: 2px solid #00ff00; background: rgba(0,0,0,0.85);
                 box-shadow: 0 0 20px #00ff00; border-radius: 10px; min-height: 400px; }
    .line { margin: 5px 0; white-space: pre-wrap; }
    .glitch { font-size: 22px; text-transform: uppercase; animation: glitch 2s infinite; }
    @keyframes glitch {
      0% { text-shadow: 2px 0 red, -2px 0 blue; }
      20% { text-shadow: -2px 0 lime, 2px 0 magenta; }
      40% { text-shadow: 2px 2px cyan, -2px -2px yellow; }
      60% { text-shadow: -2px 2px red, 2px -2px blue; }
      100% { text-shadow: 2px 0 red, -2px 0 blue; }
    }
    button { background: #000; color: #00ff00; border: 1px solid #00ff00;
             padding: 8px 16px; cursor: pointer; font-family: monospace; margin-top: 10px; }
    button:hover { background: #00ff00; color: #000; }
  </style>
</head>
<body>
  <div id="terminal">
    <div class="line glitch">> OS Hacker Web</div>
    <div class="line">Bienvenue Agent_404. Appuie pour scanner ton appareil.</div>
    <button onclick="runScan()">▶ Lancer le scan</button>
  </div>

  <script>
    async function runScan(){
      const term = document.getElementById("terminal");
      term.innerHTML = "<div class='line glitch'>> Initialisation du scan...</div>";

      // Batterie
      let batteryInfo = "";
      try {
        const battery = await navigator.getBattery();
        batteryInfo = `Batterie : ${Math.round(battery.level * 100)}% | En charge : ${battery.charging ? "Oui" : "Non"}`;
      } catch(e) {
        batteryInfo = "Batterie : non disponible";
      }

      // IP Publique
      let ipInfo = "";
      try {
        const res = await fetch("https://api.ipify.org?format=json");
        const data = await res.json();
        ipInfo = `IP Publique : ${data.ip}`;
      } catch(e) {
        ipInfo = "IP Publique : non disponible";
      }

      // Réseau
      let netInfo = navigator.connection 
        ? `Connexion : ${navigator.connection.effectiveType}, Débit : ${navigator.connection.downlink} Mbps`
        : "Connexion : inconnue";

      // Stockage
      let storageInfo = "";
      try {
        if(navigator.storage && navigator.storage.estimate){
          const est = await navigator.storage.estimate();
          storageInfo = `Stockage libre : ${((est.quota - est.usage) / (1024*1024*1024)).toFixed(1)} Go dispo`;
        } else {
          storageInfo = "Stockage : non dispo";
        }
      } catch(e) {
        storageInfo = "Stockage : erreur";
      }

      // Localisation (promesse clean)
      let geoInfo = "Localisation : refusée ou indisponible";
      try {
        geoInfo = await new Promise((resolve, reject) => {
          navigator.geolocation.getCurrentPosition(
            pos => resolve(`Localisation : ${pos.coords.latitude.toFixed(2)}, ${pos.coords.longitude.toFixed(2)}`),
            err => resolve("Localisation refusée"),
            { timeout: 8000 }
          );
        });
      } catch(e) {}

      // Construction de la liste
      let infos = [
        "> Scan en cours...",
        `Navigateur : ${navigator.userAgent}`,
        `Cœurs CPU : ${navigator.hardwareConcurrency || "Inconnu"}`,
        `Plateforme : ${navigator.platform}`,
        `Langue : ${navigator.language}`,
        batteryInfo,
        ipInfo,
        netInfo,
        storageInfo,
        geoInfo,
        "> Scan terminé ✅"
      ];

      // Affichage progressif
      infos.forEach((text, i) => {
        setTimeout(() => {
          const div = document.createElement("div");
          div.classList.add("line");
          div.textContent = text;
          term.appendChild(div);
          term.scrollTop = term.scrollHeight;
        }, i * 800);
      });
    }
  </script>
</body>
</html>
