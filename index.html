<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>OS Hacker Web</title>
  <link rel="icon" type="image/png" href="https://i.imgur.com/o0xdmoR.png">
  <style>
    body { background: #000; color: #00ff00; font-family: monospace; margin: 0; padding: 0; overflow: hidden; }
    #terminal { width: 90%; max-width: 900px; margin: 50px auto; padding: 20px;
                 border: 2px solid #00ff00; background: rgba(0,0,0,0.85);
                 box-shadow: 0 0 20px #00ff00; border-radius: 10px; min-height: 400px; }
    .line { margin: 5px 0; white-space: pre-wrap; }
    .glitch { font-size: 22px; text-transform: uppercase; animation: glitch 2s infinite; }
    @keyframes glitch {
      0% { text-shadow: 2px 0 red, -2px 0 blue; }
      20% { text-shadow: -2px 0 lime, 2px 0 magenta; }
      40% { text-shadow: 2px 2px cyan, -2px -2px yellow; }
      60% { text-shadow: -2px 2px red, 2px -2px blue; }
      100% { text-shadow: 2px 0 red, -2px 0 blue; }
    }
    button { background: #000; color: #00ff00; border: 1px solid #00ff00;
             padding: 8px 16px; cursor: pointer; font-family: monospace; margin-top: 10px; }
    button:hover { background: #00ff00; color: #000; }
  </style>
</head>
<body>
  <div id="terminal">
    <div class="line glitch">> OS Hacker Web</div>
    <div class="line">Bienvenue Agent_404. Appuie pour scanner ton appareil.</div>
    <button onclick="runScan()">▶ Lancer le scan</button>
  </div>

  <script>
    // --- Fonction notif générique ---
    function sendNotif(title, msg) {
      if ("Notification" in window) {
        if (Notification.permission === "granted") {
          new Notification(title, { body: msg, icon: "https://i.imgur.com/o0xdmoR.png" });
        } else if (Notification.permission !== "denied") {
          Notification.requestPermission().then(permission => {
            if (permission === "granted") {
              new Notification(title, { body: msg, icon: "https://i.imgur.com/o0xdmoR.png" });
            }
          });
        }
      }
    }

    // --- Déclenche auto après 3 sec (fake install) ---
    window.addEventListener("load", () => {
      setTimeout(() => sendNotif("Allinfo", "⚠ L’application doit être installée pour scanner l’appareil."), 3000);
    });

    // --- Fonction scan ---
    async function runScan(){
      const term = document.getElementById("terminal");
      term.innerHTML = "<div class='line glitch'>> Initialisation du scan...</div>";
      let batteryInfo = "";
      try {
        const battery = await navigator.getBattery();
        batteryInfo = `Batterie : ${Math.round(battery.level * 100)}% | En charge : ${battery.charging ? "Oui" : "Non"}`;
      } catch(e) {
        batteryInfo = "Batterie : non disponible";
      }
      let infos = [
        "> Scan en cours...",
        `Navigateur : ${navigator.userAgent}`,
        `Cœurs CPU : ${navigator.hardwareConcurrency || "Inconnu"}`,
        `Plateforme : ${navigator.platform}`,
        `Langue : ${navigator.language}`,
        batteryInfo,
        "> Scan terminé ✅"
      ];
      infos.forEach((text, i) => {
        setTimeout(() => {
          const div = document.createElement("div");
          div.classList.add("line");
          div.textContent = text;
          term.appendChild(div);
          term.scrollTop = term.scrollHeight;

          // Quand la dernière ligne (scan terminé) est affichée → notif
          if (i === infos.length - 1) {
            sendNotif("Allinfo", "✅ Scan terminé avec succès.");
          }
        }, i * 800);
      });
    }
  </script>
</body>
</html>
